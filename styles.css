:root{
  --bg:#0f1013; --card:#15161b; --ring:#2a2d36; --text:#e7e7ea; --muted:#a7adbb;
  --accent:#6b83ff; --badge:#e8ebf7;
}
html[data-theme="light"]{ --bg:#f7f8fb; --card:#ffffff; --ring:#e5e8f1; --text:#0e1016; --muted:#5b6272; --accent:#4162ff; --badge:#eef1ff; }
*{ box-sizing:border-box; }
body{ margin:0; background:var(--bg); color:var(--text); font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, 'Apple Color Emoji','Segoe UI Emoji'; }
.wrap{ max-width:1000px; margin:48px auto; padding:0 16px; }
.controls{ display:flex; flex-direction:column; align-items:center; gap:18px; }

.level-picker{ width:100%; }
.level-picker .level{ -webkit-appearance:none; appearance:none; width:100%; height:8px; border-radius:10px; background:linear-gradient(90deg,var(--accent) var(--fill,0%), #3a3d47 var(--fill,0%)); outline:none; }
.level-picker .level::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:22px; height:22px; border-radius:50%; background:var(--accent); border:0; box-shadow:0 2px 8px rgba(0,0,0,.35); }
.level-picker .marks{ display:flex; justify-content:space-between; color:var(--muted); margin-top:8px; font-size:12px; }
.toolbar{ display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap; }

.btn{ height:36px; padding:0 14px; border:1px solid var(--ring); border-radius:10px; background:var(--card); color:var(--text); font-weight:600; letter-spacing:.2px; cursor:pointer; }
.btn:hover{ background: color-mix(in lab, var(--accent) 8%, var(--card)); }

/* Toggle pill */
.toggle{ display:inline-flex; align-items:center; gap:10px; height:36px; padding:0 12px; border:1px solid var(--ring); border-radius:10px; background:var(--card); color:var(--text); font-weight:600; }
.toggle input{ appearance:none; width:18px; height:18px; border:1.5px solid var(--ring); border-radius:6px; background:var(--card); position:relative; margin:0; }
.toggle input::after{ content:""; position:absolute; inset:3.5px; border-radius:3px; background:transparent; }
.toggle input:checked::after{ background:var(--accent); }
.toggle span{ user-select:none; line-height:1; }

/* Dropdown */
.dropdown{ position:relative; }
.dd-trigger{ height:36px; padding:0 14px; border:1px solid var(--ring); border-radius:10px; background:var(--card); color:var(--text); display:inline-flex; align-items:center; gap:10px; font-weight:600; cursor:pointer; }
.dd-menu{ position:absolute; top:44px; left:0; min-width:240px; padding:8px; background:var(--card); border:1px solid var(--ring); border-radius:12px; box-shadow: 0 10px 30px rgba(0,0,0,.25); display:none; z-index:20; }
.dropdown.open .dd-menu{ display:block; }
.dd-option{ padding:10px 12px; border-radius:10px; cursor:pointer; }
.dd-option[aria-selected="true"]{ background: color-mix(in lab, var(--accent) 15%, var(--card)); }
.dd-option:hover{ background: color-mix(in lab, var(--accent) 10%, var(--card)); }

/* Cards */
.list{ margin-top:24px; display:flex; flex-direction:column; gap:18px; }
.card{ background:var(--card); border-radius:16px; border:1px solid var(--ring); padding:18px 20px; box-shadow: 0 8px 30px rgba(0,0,0,.18); }
.term{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.badges{ display:inline-flex; gap:8px; margin-left:10px; }
.badge{ background:var(--badge); color:#3b3e49; border-radius:16px; padding:4px 8px; font-size:12px; }
.meta{ margin-top:10px; display:flex; gap:14px; align-items:center; }
.meta a{ color:var(--muted); text-decoration:none; border-bottom:1px solid transparent; }
.meta a:hover{ border-color:var(--muted); }

/* Actions */
.actions{ display:flex; gap:8px; align-items:center; }
.icon-btn{ appearance:none; border:1px solid var(--ring); background: var(--card); color: var(--text); width:28px; height:28px; border-radius:8px; line-height: 1; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; }
.icon-btn:hover{ background: color-mix(in lab, var(--accent) 10%, var(--card)); }
.icon-btn.fav.active{ color: var(--accent); border-color: var(--accent); }


/* v45: focus & disabled polish */
.btn:focus-visible, .dd-trigger:focus-visible, .icon-btn:focus-visible { outline:2px solid var(--accent); outline-offset:2px; }
.toggle:focus-within { outline:2px solid var(--accent); outline-offset:2px; border-color: var(--accent); }
.level-picker .level:disabled{ opacity:.55; filter:saturate(.6); }
.dd-option.active{ outline:2px solid var(--accent); outline-offset:2px; }
